
<%= render "events/header"%>

<%= render "events/adminheader"%>

<h2 class="text-center">Requests</h2>

<%= form_with url: requests_path, method: :get, local: true do %>
  <div>
    <%= label_tag :request_type, 'Request Type' %>
    <%= select_tag :request_type, options_for_select(Request.request_types.keys.map { |type| [type.humanize, type] }, params[:request_type]), include_blank: true %>
  </div>

  <div>
    <%= label_tag :status, 'Status' %>
    <%= select_tag :status, options_for_select(Request.statuses.keys.map { |status| [status.humanize, status] }, params[:status]), include_blank: true %>
  </div>

  <div>
    <%= submit_tag 'Filter' %>
  </div>
<% end %>

  <table style="width: 90%; margin-left: auto; margin-right: auto;">
    <thead class="thead-dark">
      <tr>
        <th>Name</th>
        <th>Request Type</th>
        <th>Status</th>
        <th> 
</th>
      </tr>
    </thead>

    <tbody>
      <% @requests.each do |request| %>

        <tr>
          <% member = @members.find(request.member_id) %>
          <td>
                <%= link_to member.full_name, request %>
          </td>
          
          <td><%= request.request_type.humanize %></td>
          <td><%= request.status.humanize %></td>


          
          <td><%= link_to("Delete", delete_request_path(request)) %></td>
          
        </tr>
        
      <% end %>
    </tbody>
  </table>

  <br>



